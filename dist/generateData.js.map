{"version":3,"file":"generateData.js","mappings":"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","sources":["webpack://datagrab/webpack/universalModuleDefinition","webpack://datagrab/webpack/bootstrap","webpack://datagrab/webpack/runtime/define property getters","webpack://datagrab/webpack/runtime/hasOwnProperty shorthand","webpack://datagrab/webpack/runtime/make namespace object","webpack://datagrab/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const N = 130;\r\nconst Granularity = 3;\r\n\r\nconst getRGBfromString = (String) => String.match(/rgb\\((?<r>.*?),(?<g>.*?),(?<b>.*?)\\)/).groups;\r\n\r\nconst colorsCanBeSame = (colorA, colorB) => {\r\n\tlet { r, g, b } = getRGBfromString(colorA);\r\n\tlet { r: r1, g: g1, b: b1 } = getRGBfromString(colorB);\r\n\r\n\treturn (\r\n\t\tMath.abs(Number(r) - Number(r1)) < N &&\r\n\t\tMath.abs(Number(g) - Number(g1)) < N &&\r\n\t\tMath.abs(Number(b) - Number(b1)) < N\r\n\t)\r\n}\r\n\r\nconst initImg = (img) => {\r\n\tlet style = window.getComputedStyle(img);\r\n\tlet width = parseInt(style.width, 10);\r\n\tlet height = parseInt(style.height, 10);\r\n\tlet canvas = document.createElement('canvas');\r\n\tcanvas.width = width;\r\n\tcanvas.height = height;\r\n\tlet ctx = canvas.getContext('2d');\r\n\tctx.drawImage(img, 0, 0);\r\n\r\n\tconst getPixelColor = (x, y) => {\r\n\t\tlet imageData = ctx.getImageData(x, y, 1, 1);\r\n\t\tlet pixel = imageData.data;\r\n\t\tlet r = pixel[0];\r\n\t\tlet g = pixel[1];\r\n\t\tlet b = pixel[2];\r\n\t\tlet a = pixel[3] / 255;\r\n\t\ta = Math.round(a * 100) / 100;\r\n\r\n\t\tlet rgbColor = `rgb(${r},${g},${b})`;\r\n\r\n\t\treturn rgbColor;\r\n\t}\r\n\r\n\treturn {\r\n\t\twidth,\r\n\t\theight,\r\n\t\tgetColor: getPixelColor,\r\n\t};\r\n}\r\n\r\nexport const generateData = (imgNode, xStart, xEnd, yStart, yEnd) => {\r\n\tconst canvas = initImg(imgNode);\r\n\tconst resData = {\r\n\t\t\"rgb(255,255,255)\": [],\r\n\t\t\"rgb(50,50,50)\": [],\r\n\t};\r\n\r\n\tfor (let j = 0; j < canvas.height; j += Granularity) {\r\n\t\tfor (let i = 0; i < canvas.width; i += Granularity) {\r\n\r\n\t\t\tlet color = canvas.getColor(i, j);\r\n\r\n\t\t\tlet xCooratt = Math.floor(i / canvas.width * (xEnd - xStart) + xStart);\r\n\t\t\tlet yCooratt = Math.floor((canvas.height - j) / canvas.height * (yEnd - yStart) + yStart);\r\n\r\n\t\t\tlet cooratt = `[${xCooratt},${yCooratt}]`;\r\n\r\n\t\t\tlet keys = Object.keys(resData);\r\n\r\n\t\t\tlet sameFlag = false;\r\n\t\t\tfor (var n = 0; n < keys.length; n++) {\r\n\t\t\t\tif (colorsCanBeSame(keys[n], color)) {\r\n\t\t\t\t\tresData[`${keys[n]}`].push(cooratt);\r\n\t\t\t\t\tsameFlag = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!sameFlag) {\r\n\t\t\t\tresData[`${color}`] = [cooratt];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdelete (resData[\"rgb(255,255,255)\"]);\r\n\t// delete (resData[\"rgb(50,50,50)\"]);\r\n\r\n\treturn resData;\r\n}"],"names":["root","factory","exports","module","define","amd","a","i","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","getRGBfromString","String","match","groups","colorsCanBeSame","colorA","colorB","r","g","b","r1","g1","b1","Math","abs","Number","generateData","imgNode","xStart","xEnd","yStart","yEnd","canvas","img","style","window","getComputedStyle","width","parseInt","height","document","createElement","ctx","getContext","drawImage","getColor","x","y","pixel","getImageData","data","round","initImg","resData","j","color","cooratt","floor","keys","sameFlag","n","length","push"],"sourceRoot":""}